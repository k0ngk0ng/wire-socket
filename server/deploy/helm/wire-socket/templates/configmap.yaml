apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "wire-socket.fullname" . }}-config
  labels:
    {{- include "wire-socket.labels" . | nindent 4 }}
data:
  config.yaml: |
    server:
      address: {{ .Values.config.server.address | quote }}

    database:
      path: {{ .Values.config.database.path | quote }}

    wireguard:
      device_name: {{ .Values.config.wireguard.deviceName | quote }}
      mode: {{ .Values.config.wireguard.mode | quote }}
      listen_port: {{ .Values.config.wireguard.listenPort }}
      subnet: {{ .Values.config.wireguard.subnet | quote }}
      dns: {{ .Values.config.wireguard.dns | quote }}
      endpoint: {{ .Values.config.wireguard.endpoint | quote }}

    auth:
      jwt_secret: {{ .Values.config.auth.jwtSecret | quote }}

    tunnel:
      enabled: {{ .Values.config.tunnel.enabled }}
      listen_addr: {{ .Values.config.tunnel.listenAddr | quote }}
