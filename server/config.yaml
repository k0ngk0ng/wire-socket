# VPN Server Configuration

server:
  # HTTP server address
  address: "0.0.0.0:8080"

  # HTTPS configuration (optional, comment out for HTTP only)
  # tls:
  #   cert_file: "/etc/letsencrypt/live/vpn.example.com/fullchain.pem"
  #   key_file: "/etc/letsencrypt/live/vpn.example.com/privkey.pem"

database:
  # SQLite database path
  path: "./vpn.db"

  # Or use PostgreSQL (uncomment below and comment out SQLite)
  # driver: "postgres"
  # dsn: "host=localhost user=vpn password=vpn dbname=vpn port=5432 sslmode=disable"

wireguard:
  # WireGuard interface name
  device_name: "wg0"

  # WireGuard mode: "kernel" (requires wireguard-tools) or "userspace" (pure Go, no dependencies)
  mode: "userspace"

  # Server listen port
  listen_port: 51820

  # VPN subnet (clients will get IPs from this range)
  subnet: "10.0.0.0/24"

  # DNS servers for clients
  dns: "1.1.1.1,8.8.8.8"

  # Server endpoint (public address that clients will connect to)
  endpoint: "vpn.example.com:51820"

  # Routes to push to clients (CIDR format)
  # These are ADDITIONAL routes beyond the VPN subnet
  # The VPN subnet is automatically included
  # Examples:
  routes: []
    # - "192.168.1.0/24"  # Access to internal network
    # - "10.0.0.0/8"      # Access to private networks
    # - "0.0.0.0/0"       # Route ALL traffic through VPN

  # Server private key (leave empty to generate new)
  # private_key: ""

  # Server public key (will be generated from private key)
  # public_key: ""

auth:
  # JWT secret for token signing (change this in production!)
  jwt_secret: "change-this-secret-in-production"

tunnel:
  # Enable built-in WebSocket tunnel (replaces wstunnel)
  enabled: true

  # Tunnel listen address (WebSocket)
  listen_addr: "0.0.0.0:443"

  # Public hostname for clients (used to build tunnel URL)
  # The full URL will be: wss://{public_host}{path}
  public_host: "vpn.example.com"

  # Path prefix for WebSocket upgrade (useful for nginx reverse proxy)
  # Similar to wstunnel's --restrict-http-upgrade-path-prefix
  # Examples: "/", "/tunnel", "/wg", "/secret-path"
  path: "/"

  # TLS configuration for WSS (optional, for WS only leave empty)
  # tls_cert: "/etc/letsencrypt/live/vpn.example.com/fullchain.pem"
  # tls_key: "/etc/letsencrypt/live/vpn.example.com/privkey.pem"
